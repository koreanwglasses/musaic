var Musaic=function(t){var e={};function r(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(s,i,function(e){return t[e]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t,e){t.exports=React},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(t,e,r,s){this.r=t||0,this.g=e||0,this.b=r||0,this.a=s||1}getR(){return this.r}getG(){return this.g}getB(){return this.b}getA(){return this.a}getRgba(){return"rgba("+this.r+","+this.b+","+this.g+","+this.a+")"}equals(t){return t instanceof s&&(this.r==t.r&&this.g==t.g&&this.b==t.b&&this.a==t.a)}hashString(){return this.r+","+this.g+","+this.b+","+this.a}}e.Color=s;class i{constructor(t,e){this.x=t||0,this.y=e||0}getX(){return this.x}getY(){return this.y}equals(t){return t instanceof i&&(this.x==t.x&&this.y==t.y)}hashString(){return this.x+","+this.y}}e.Point=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=r(0),i=r(3),n=r(4),o=r(5),a=r(1);let h=new o.SimpleMosaic(100,100),u=s.createElement(n.PixelMosaic,{mosaic:h,scale:5});i.render(u,document.getElementById("root")),function t(){(function t(e){if(1==e){let t=Math.floor(255*Math.random()),e=Math.floor(255*Math.random()),r=Math.floor(255*Math.random()),s=Math.random(),i=new a.Color(t,e,r,s);return h.addTile(i)}for(let r=0;r<e;r++)if(!t(1))return!1;return!0})(10)&&(h.notifyObservers(),requestAnimationFrame(t))}()},function(t,e){t.exports=ReactDOM},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=r(0);e.PixelMosaic=class extends s.Component{constructor(t){if(super(t),this.mosaic=this.props.mosaic,!this.mosaic)throw new Error("Mosaic not defined in props!");this.scale=this.props.scale||1,this.mosaic.addObserver(this)}componentDidMount(){this.updateCanvas()}updateCanvas(){const t=this.refs.canvas.getContext("2d");t.clearRect(0,0,this.mosaic.getWidth(),this.mosaic.getHeight());for(let e=0;e<this.mosaic.getHeight();e++)for(let r=0;r<this.mosaic.getWidth();r++)t.fillStyle=this.mosaic.getColorAt(r,e).getRgba(),t.fillRect(e*this.scale,r*this.scale,this.scale,this.scale)}render(){return s.createElement("canvas",{ref:"canvas",width:this.mosaic.getWidth()*this.scale,height:this.mosaic.getHeight()*this.scale})}update(){this.updateCanvas()}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=r(1),i=r(6),n=r(7);e.SimpleMosaic=class extends n.Mosaic{constructor(t,e){super(t,e),this.grid=new Array;for(let r=0;r<e;r++){this.grid[r]=new Array;for(let e=0;e<t;e++)this.grid[r][e]=new s.Color}this.boundary=new i.HashSet,this.boundary.add(new s.Point(Math.floor(t/2),Math.floor(e/2)))}addTile(t){let e=this;function r(t,r){let i=new Array;return i.push(new s.Point(t-1,r-1)),i.push(new s.Point(t-1,r)),i.push(new s.Point(t-1,r+1)),i.push(new s.Point(t,r-1)),i.push(new s.Point(t,r+1)),i.push(new s.Point(t+1,r-1)),i.push(new s.Point(t+1,r)),i.push(new s.Point(t+1,r+1)),i.filter(t=>0<=t.getX()&&t.getX()<e.getWidth()&&0<=t.getY()&&t.getY()<e.getHeight())}function i(i,n){let o=r(i,n).filter(t=>!e.getColorAt(t.getX(),t.getY()).equals(new s.Color)).map(r=>(function(t,e){return Math.pow(t.getR()-e.getR(),2)+Math.pow(t.getG()-e.getG(),2)+Math.pow(t.getB()-e.getB(),2)})(t,e.getColorAt(r.getX(),r.getY())));return 0==o.length?0:Math.min(...o)}let n=function(){let t,r=Number.POSITIVE_INFINITY;for(let s of e.boundary){let e=i(s.getX(),s.getY());e<r&&(r=e,t=s)}return t}();return!!n&&(function(t){e.boundary.delete(t);let i=r(t.getX(),t.getY()).filter(t=>e.getColorAt(t.getX(),t.getY()).equals(new s.Color));e.boundary.addAll(i)}(n),this.grid[n.getY()][n.getX()]=t,this.setChanged(),!0)}getColorAt(t,e){return this.grid[e][t]}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.HashSet=class{constructor(t){if(this.map=new Map,t)for(let e of t)this.add(e)}add(t){if(!this.has(t)){let e=t.hashString(),r=this.map.get(e);r?r.push(t):this.map.set(e,[t])}return this}addAll(t){for(let e of t)this.add(e);return this}clear(){throw new Error("Method not implemented.")}delete(t){if(this.has(t)){let e=t.hashString(),r=this.map.get(e);1==r.length&&this.map.delete(e);let s=r.findIndex(e=>t.equals(e));return r.splice(s,1),!0}return!1}entries(){throw new Error("Method not implemented.")}forEach(t,e){throw new Error("Method not implemented.")}has(t){let e=this.map.get(t.hashString());if(e){if(1==e.length)return!0;for(let r of e)if(t.equals(r))return!0;return!1}return!1}keys(){return this.values()}values(){let t=new Array;for(let e of this.map)for(let r of e[1])t.push(r);return t.values()}[Symbol.iterator](){return this.values()}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=r(8);e.Mosaic=class extends s.Observable{constructor(t,e){super(),this.width=t,this.height=e}getWidth(){return this.width}getHeight(){return this.height}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Observable=class{constructor(){this.observers=new Set}addObserver(t){this.observers.add(t)}hasChanged(){return this.isChanged}setChanged(){this.isChanged=!0}clearChanged(){this.isChanged=!1}notifyObservers(t){for(let e of this.observers)e.update(this,t);this.clearChanged()}}}]);