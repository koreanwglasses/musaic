var Musaic=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t){e.exports=THREE},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t,r,n){this.r=void 0!==e?e:0,this.g=void 0!==t?t:0,this.b=void 0!==r?r:0,this.a=void 0!==n?n:1}getR(){return this.r}getG(){return this.g}getB(){return this.b}getA(){return this.a}getRgba(){return"rgba("+this.r+","+this.b+","+this.g+","+this.a+")"}equals(e){return e instanceof n&&(this.r==e.r&&this.g==e.g&&this.b==e.b&&this.a==e.a)}hashString(){return this.r+","+this.g+","+this.b+","+this.a}}n.blank=new n(0,0,0,0),t.Color=n;class i{constructor(e,t){this.x=e||0,this.y=t||0}getX(){return this.x}getY(){return this.y}equals(e){return e instanceof i&&(this.x==e.x&&this.y==e.y)}hashString(){return this.x+","+this.y}}t.Point=i;t.Pixel=class{constructor(e,t){this.position=e,this.color=t}getPosition(){return this.position}getColor(){return this.color}}},function(e,t){e.exports=React},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2),i=r(4),o=r(5),s=r(7),a=r(1);let h=new s.SimpleMosaic(100,100),l=n.createElement(o.VoronoiView,{mosaic:h,scale:5});i.render(l,document.getElementById("root"));let u=1;!function e(){let t=function e(t){if(1==t){let e=Math.floor(255*Math.random()),t=Math.floor(255*Math.random()),r=Math.floor(255*Math.random()),n=new a.Color(e,t,r);return h.addTile(n)}for(let r=0;r<t;r++)if(!e(1))return!1;return!0}(u++);h.notifyObservers(),t&&requestAnimationFrame(e)}()},function(e,t){e.exports=ReactDOM},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2),i=r(0),o=r(1),s=r(6),a=r(0);t.VoronoiView=class extends n.Component{constructor(e){if(super(e),this.mosaic=this.props.mosaic,!this.mosaic)throw new Error("Mosaic not defined in props!");this.scale=this.props.scale||1,this.mosaic.addObserver(this)}componentDidMount(){this.init(),this.updateCanvas()}init(){const e=this.refs.container;this.renderer=new i.WebGLRenderer,this.renderer.setSize(this.mosaic.getWidth()*this.scale,this.mosaic.getHeight()*this.scale),e.appendChild(this.renderer.domElement),this.scene=new i.Scene,this.camera=new i.OrthographicCamera(0,this.mosaic.getWidth(),0,-this.mosaic.getHeight(),0,1e3),this.camera.position.y=10,this.camera.lookAt(0,0,0),this.offsets=new Array;for(let e=0;e<this.mosaic.getHeight();e++)this.offsets[e]=new Array}updateCanvas(){for(;this.scene.children.length>0;)this.scene.remove(this.scene.children[0]);let e=new Array;for(let t=0;t<this.mosaic.getHeight();t++)for(let r=0;r<this.mosaic.getWidth();r++){let n;if(!(n=this.mosaic.isOnBoundary(r,t)?new o.Color(0,0,0,1):this.mosaic.getColorAt(r,t)).equals(o.Color.blank)){let i=new o.Pixel(new o.Point(r,t),n);if(e.push(i),!this.offsets[t][r]){let e=.8*(Math.random()-.5),n=.8*(Math.random()-.5);this.offsets[t][r]=new a.Vector2(e,n)}}}let t=new s.VoronoiHelper(e,this.offsets,2);this.scene.add(t),this.renderer.render(this.scene,this.camera)}render(){return n.createElement("div",{ref:"container"})}update(){this.updateCanvas()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0);class i extends n.Object3D{constructor(e,t,r,o){super();for(var s=e.length,a=r||1,h=o||16,l=[],u=[],c=0;c<s;c++){let r=e[c].getPosition().getX(),n=e[c].getPosition().getY();l.push(r+t[n][r].x,0,n+t[n][r].y),u.push(e[c].getColor().getR()/255,e[c].getColor().getG()/255,e[c].getColor().getB()/255,1)}var d=new n.ConeBufferGeometry(a,2*a,h),f=new n.InstancedBufferGeometry;f.index=d.index,f.attributes=d.attributes,f.maxInstancedCount=s,f.addAttribute("offset",new n.InstancedBufferAttribute(new Float32Array(l),3)),f.addAttribute("color",new n.InstancedBufferAttribute(new Float32Array(u),4));var g=new n.RawShaderMaterial({vertexShader:i.vertexShader,fragmentShader:i.fragmentShader}),p=new n.Mesh(f,g);this.add(p)}}i.vertexShader="\n    precision highp float;\n    \n    uniform float sineTime;\n    \n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n    \n    attribute vec3 position;\n    attribute vec3 offset;\n    attribute vec4 color;\n    \n    varying vec3 vPosition;\n    varying vec4 vColor;\n    \n    void main(){\n        vPosition = offset + position;\n        vColor = color;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( vPosition, 1.0 );\n    } \n    ",i.fragmentShader="\n    precision highp float;\n    \n    varying vec4 vColor;\n    \n    void main() {\n        gl_FragColor = vColor;\n    }\n    ",t.VoronoiHelper=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1),i=r(8),o=r(9);t.SimpleMosaic=class extends o.Mosaic{constructor(e,t){super(e,t),this.grid=new Array;for(let r=0;r<t;r++){this.grid[r]=new Array;for(let t=0;t<e;t++)this.grid[r][t]=n.Color.blank}this.boundary=new i.HashSet,this.boundary.add(new n.Point(Math.floor(e/2),Math.floor(t/2)))}addTile(e){let t=this;function r(e,r){let i=new Array;return i.push(new n.Point(e-1,r-1)),i.push(new n.Point(e-1,r)),i.push(new n.Point(e-1,r+1)),i.push(new n.Point(e,r-1)),i.push(new n.Point(e,r+1)),i.push(new n.Point(e+1,r-1)),i.push(new n.Point(e+1,r)),i.push(new n.Point(e+1,r+1)),i.filter(e=>0<=e.getX()&&e.getX()<t.getWidth()&&0<=e.getY()&&e.getY()<t.getHeight())}function i(i,o){let s=r(i,o).filter(e=>!t.getColorAt(e.getX(),e.getY()).equals(n.Color.blank)).map(r=>(function(e,t){return Math.pow(e.getR()-t.getR(),2)+Math.pow(e.getG()-t.getG(),2)+Math.pow(e.getB()-t.getB(),2)})(e,t.getColorAt(r.getX(),r.getY())));return 0==s.length?0:Math.min(...s)}let o=function(){let e,r=Number.POSITIVE_INFINITY;for(let n of t.boundary){let t=i(n.getX(),n.getY());t<r&&(r=t,e=n)}return e}();return!!o&&(function(e){t.boundary.delete(e);let i=r(e.getX(),e.getY()).filter(e=>t.getColorAt(e.getX(),e.getY()).equals(n.Color.blank));t.boundary.addAll(i)}(o),this.grid[o.getY()][o.getX()]=e,this.setChanged(),!0)}getColorAt(e,t){return this.grid[t][e]}isOnBoundary(e,t){return this.boundary.has(new n.Point(e,t))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.HashSet=class{constructor(e){if(this.map=new Map,e)for(let t of e)this.add(t)}add(e){if(!this.has(e)){let t=e.hashString(),r=this.map.get(t);r?r.push(e):this.map.set(t,[e])}return this}addAll(e){for(let t of e)this.add(t);return this}clear(){throw new Error("Method not implemented.")}delete(e){if(this.has(e)){let t=e.hashString(),r=this.map.get(t);1==r.length&&this.map.delete(t);let n=r.findIndex(t=>e.equals(t));return r.splice(n,1),!0}return!1}entries(){throw new Error("Method not implemented.")}forEach(e,t){throw new Error("Method not implemented.")}has(e){let t=this.map.get(e.hashString());if(t){if(1==t.length)return!0;for(let r of t)if(e.equals(r))return!0;return!1}return!1}keys(){return this.values()}values(){let e=new Array;for(let t of this.map)for(let r of t[1])e.push(r);return e.values()}[Symbol.iterator](){return this.values()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10);t.Mosaic=class extends n.Observable{constructor(e,t){super(),this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Observable=class{constructor(){this.observers=new Set}addObserver(e){this.observers.add(e)}hasChanged(){return this.isChanged}setChanged(){this.isChanged=!0}clearChanged(){this.isChanged=!1}notifyObservers(e){for(let t of this.observers)t.update(this,e);this.clearChanged()}}}]);