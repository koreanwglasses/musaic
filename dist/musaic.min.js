var Musaic=function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t,e){t.exports=React},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t,e,r,n){this.r=t||0,this.g=e||0,this.b=r||0,this.a=n||1}getR(){return this.r}getG(){return this.g}getB(){return this.b}getA(){return this.a}getRgba(){return"rgba("+this.r+","+this.b+","+this.g+","+this.a+")"}equals(t){return t instanceof n&&(this.r==t.r&&this.g==t.g&&this.b==t.b&&this.a==t.a)}hashString(){return this.r+","+this.g+","+this.b+","+this.a}}e.Color=n;class s{constructor(t,e){this.x=t||0,this.y=e||0}getX(){return this.x}getY(){return this.y}equals(t){return t instanceof s&&(this.x==t.x&&this.y==t.y)}hashString(){return this.x+","+this.y}}e.Point=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(0),s=r(3),i=r(4),o=r(5),a=r(1);let h=new o.SimpleMosaic(500,500),u=n.createElement(i.PixelMosaic,{mosaic:h});s.render(u,document.getElementById("root")),function t(){let e=Math.floor(255*Math.random()),r=Math.floor(255*Math.random()),n=Math.floor(255*Math.random()),s=Math.random(),i=new a.Color(e,r,n,s);h.addTile(i),h.notifyObservers(),requestAnimationFrame(t)}()},function(t,e){t.exports=ReactDOM},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(0);e.PixelMosaic=class extends n.Component{constructor(t){if(super(t),!this.props.mosaic)throw new Error("Mosaic not defined in props!");this.props.mosaic.addObserver(this)}componentDidMount(){this.updateCanvas()}updateCanvas(){const t=this.props.mosaic,e=this.refs.canvas.getContext("2d");e.clearRect(0,0,t.getWidth(),t.getHeight());for(let r=0;r<t.getHeight();r++)for(let n=0;n<t.getWidth();n++)e.fillStyle=t.getColorAt(n,r).getRgba(),e.fillRect(r,n,1,1)}render(){return n.createElement("canvas",{ref:"canvas",width:this.props.mosaic.getWidth(),height:this.props.mosaic.getHeight()})}update(){this.updateCanvas()}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(1),s=r(6),i=r(7);e.SimpleMosaic=class extends i.Mosaic{constructor(t,e){super(),this.width=t,this.height=e,this.grid=new Array;for(let r=0;r<e;r++){this.grid[r]=new Array;for(let e=0;e<t;e++)this.grid[r][e]=new n.Color}this.boundary=new s.HashSet,this.boundary.add(new n.Point(Math.floor(t/2),Math.floor(e/2)))}addTile(t){let e=this;function r(t,r){let s=new Array;return s.push(new n.Point(t-1,r-1)),s.push(new n.Point(t-1,r)),s.push(new n.Point(t-1,r+1)),s.push(new n.Point(t,r-1)),s.push(new n.Point(t,r+1)),s.push(new n.Point(t+1,r-1)),s.push(new n.Point(t+1,r)),s.push(new n.Point(t+1,r+1)),s.filter(t=>0<=t.getX()&&t.getX()<e.width&&0<=t.getY()&&t.getY()<e.height)}function s(s,i){let o=r(s,i).filter(t=>!e.getColorAt(t.getX(),t.getY()).equals(new n.Color)).map(r=>(function(t,e){return Math.pow(t.getR()-e.getR(),2)+Math.pow(t.getG()-e.getG(),2)+Math.pow(t.getB()-e.getB(),2)})(t,e.getColorAt(r.getX(),r.getY())));return 0==o.length?0:Math.min(...o)}let i=function(){let t,r=Number.POSITIVE_INFINITY;for(let n of e.boundary){let e=s(n.getX(),n.getY());e<r&&(r=e,t=n)}return t}();!function(t){e.boundary.delete(t);let s=r(t.getX(),t.getY()).filter(t=>e.getColorAt(t.getX(),t.getY()).equals(new n.Color));e.boundary.addAll(s)}(i),this.grid[i.getY()][i.getX()]=t,this.setChanged()}getColorAt(t,e){return this.grid[e][t]}getWidth(){return this.width}getHeight(){return this.width}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.HashSet=class{constructor(t){if(this.map=new Map,t)for(let e of t)this.add(e)}add(t){if(!this.has(t)){let e=t.hashString(),r=this.map.get(e);r?r.push(t):this.map.set(e,[t])}return this}addAll(t){for(let e of t)this.add(e);return this}clear(){throw new Error("Method not implemented.")}delete(t){if(this.has(t)){let e=t.hashString(),r=this.map.get(e);1==r.length&&this.map.delete(e);let n=r.findIndex(e=>t.equals(e));return r.splice(n,1),!0}return!1}entries(){throw new Error("Method not implemented.")}forEach(t,e){throw new Error("Method not implemented.")}has(t){let e=this.map.get(t.hashString());if(e){if(1==e.length)return!0;for(let r of e)if(t.equals(r))return!0;return!1}return!1}keys(){return this.values()}values(){let t=new Array;for(let e of this.map)for(let r of e[1])t.push(r);return t.values()}[Symbol.iterator](){return this.values()}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(8);e.Mosaic=class extends n.Observable{}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Observable=class{constructor(){this.observers=new Set}addObserver(t){this.observers.add(t)}hasChanged(){return this.isChanged}setChanged(){this.isChanged=!0}clearChanged(){this.isChanged=!1}notifyObservers(t){for(let e of this.observers)e.update(this,t);this.clearChanged()}}}]);